TITLE:	 generated dataset for 1-1-1 multilevel mediation 
	with cross-level interaction

montecarlo:
		names are y x m w;
		nobservations = 1000;
		ncsizes = 1;
		csizes = 100 (10);
		seed = 42;
		nreps = 2;
!		within = x;
		between = w;
		REPSAVE = ALL; SAVE = example1rep*.dat;

ANALYSIS:  TYPE = TWOLEVEL RANDOM;
ESTIMATOR = BAYES; !FBITER = 800;

model population:
		%within%
		! variances of exogenous variables
		x@1;
		! (residual) variances of endogenous variables
		y*1;
		m*1;
		! mediation with random parameters
		sa | m on x;
		sb | y on m;
		scprime | y on x;

		%between%
		! exogenous: variances and means
		[w@3]; w*1;
        [x@2]; x*1; 
		! endogenous: residual vareiances and intercepts
		[m*4]; m*1;
		[y*3]; y*1; 
		! variances of random slopes/effects
		sa*.3;
		sb*.3;
		scprime*.15;
		! intercepts of random slopes
		[sa*1]; [sb*1]; [scprime*0.2];

		! between-level mediation effects
		y ON m*0.4;
		m on x*0.4;
		y on m*0.2;
		! cross-level interaction for sa (first stage mediation)
        w with x*.3;
		m on w*0.2;
		sa on w*0.5;
        m with sa*.2;

		
model:
		%within%
		! variances of exogenous variables
		x@1;
		! (residual) variances of endogenous variables
		y*1;
		m*1;
		! mediation with random parameters
		sa | m on x;
		sb | y on m;
		scprime | y on x;

		%between%
		! exogenous: variances and means
		 w*1;
         x*1; 
		! endogenous: residual vareiances and intercepts
		[m*0]; m*1;
		[y*0]; y*1; 
		! variances of random slopes/effects
		sa*.3;
		sb*.3;
		scprime*.15;
		! intercepts of random slopes
		[sa*1]; [sb*1]; [scprime*0.2];

		! between-level mediation effects
		y ON m*0.4;
		m on x*0.4;
		y on m*0.2;
		! cross-level interaction for sa (first stage mediation)
        w with x*.3;
		m on w*0.2;
		sa on w*0.5;
        m with sa*.2;




output:
		tech9 stdyx;