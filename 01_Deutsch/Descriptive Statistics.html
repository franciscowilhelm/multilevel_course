<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Descriptive Statistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Descriptive Statistics_files/libs/clipboard/clipboard.min.js"></script>
<script src="Descriptive Statistics_files/libs/quarto-html/quarto.js"></script>
<script src="Descriptive Statistics_files/libs/quarto-html/popper.min.js"></script>
<script src="Descriptive Statistics_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Descriptive Statistics_files/libs/quarto-html/anchor.min.js"></script>
<link href="Descriptive Statistics_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Descriptive Statistics_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Descriptive Statistics_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Descriptive Statistics_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Descriptive Statistics_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Descriptive Statistics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(haven, psych,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>               sjmisc, sjPlot, writexl,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>               tidyverse, multilevelTools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"data_scoring.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="icc-und-within-person-variance" class="level2">
<h2 class="anchored" data-anchor-id="icc-und-within-person-variance">ICC und Within-Person Variance</h2>
<p>Uns interessiert wie gross der Anteil der Varianz ist, der auf die zwei Ebenen der Daten entfallen (Inner-Person, Zwischen-Person-Ebene). Dies kann uns der ICC angeben. Mittels der Funktion <code>statsBy()</code> bekommen wir einige Analysen zu unseren Mehrebenen-Daten geliefert. Die Funktion benötigt zwei Argumente: den Datensatz und und die Gruppierungsvariable. Wir wählen mittels <code>select()</code> die Rohvariante der Variablen aus, da nur diese die Informationen über beide Ebenen enthalten. Ersetzt entsprechend im <code>select()</code> die Variablen mit denen, die euch interessieren, hier sowohl die täglichen als auch Baselinevariablen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mehrebenen_stats <span class="ot">&lt;-</span> df_scores <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">statsBy</span>(<span class="at">group =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cor(diffs, use = use, method = method): the standard deviation is
zero</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cov2cor(xvals$rwg): diag(V) had non-positive or NA entries; the
non-finite result may be dubious</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cor(new.data[, (nvar + 1):ncol(new.data)], diffs, use = "pairwise",
: the standard deviation is zero</code></pre>
</div>
</div>
<p>Wir bekommen hier Warnungen, weil wir auch eine reine Level-2 Variablen eingeschlossen haben (w). Dies können wir jedoch ignorieren. Den ICC können wir uns angeben lassen, indem wir aus dem Listenobjekt <code>mehrebenen_stats</code> mit dem Dollarzeichen <code>$</code> die Untervariable <code>ICC1</code> anwählen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>icc <span class="ot">&lt;-</span> mehrebenen_stats<span class="sc">$</span>ICC1 <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>) <span class="co"># runden</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>icc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id    w    a    b    c 
1.00 1.00 0.49 0.55 0.47 </code></pre>
</div>
</div>
<p>Alle Skalen im Beispiel haben ICCs in einem angemessenen Bereich (&lt;.80). Dies heisst, dass genug tägliche Varianz vorhanden ist, um Mehrebenen-Analysen durchzuführen.</p>
</section>
<section id="korrelationstabelle" class="level2">
<h2 class="anchored" data-anchor-id="korrelationstabelle">Korrelationstabelle</h2>
<p>In psychologischen Artikeln ist (fast) immer die Korrelationstabelle die erste Tabelle des Artikels. Unser nächstes Ziel ist es, die Korrelationstabelle anzufertigen in der wir auch die Mittelwerte und Standardabweichungen integrieren.</p>
<section id="mittelwerte" class="level3">
<h3 class="anchored" data-anchor-id="mittelwerte">Mittelwerte</h3>
<p>Mittelwerte wurden bereits - pro Person - durch die statsBy() Funktion gebildet. Den allgemeinen Mittelwert bekommen wir mit der Funktion <code>summarise()</code>. Diese erlaubt uns, zusammenfassende Werte zu bilden. Da wir dies gleich für mehrere Variablen machen, benutzen wir zudem <code>across()</code> um die Summary gleich für mehrere Variablen zu bilden. Die Funktion benötigt als Argumente (a) die Namen der Variablen mit <code>c()</code> als einen Vektor zusammengefasst, (b) die Funktionen, wie sie gebildet werden (hier: <code>~mean(.x, na.rm = TRUE)</code> für das arithmetische Mittel unter Ausschluss aller nicht vorhandenen Werte) und (c) optional die Namen der ausgegebenen Variablen mittels “.names”. Wir verwenden “m_{.col}”. Abschliessend runden wir die Werte.</p>
<p>Ersetzt im folgenden Code in der Klammer von <code>c()</code> die Variablennamen mit denen, die euch interessieren, hier sowohl die täglichen als auch Baselinevariablen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mittelwerte <span class="ot">&lt;-</span> mehrebenen_stats<span class="sc">$</span>mean <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(w, a, b, c), <span class="sc">~</span><span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>mittelwerte</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">w</th>
<th style="text-align: right;">a</th>
<th style="text-align: right;">b</th>
<th style="text-align: right;">c</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">-0.0191491</td>
<td style="text-align: right;">0.0342735</td>
<td style="text-align: right;">-0.0506808</td>
<td style="text-align: right;">-0.0093489</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Wir sehen, dass Boredom und bored behavior eher selten sind. Für die Verteilung der Variablen sehen wir uns idealerweise auch Histogramme an (hier nicht aufgezeigt).</p>
<section id="standardabweichungen" class="level4">
<h4 class="anchored" data-anchor-id="standardabweichungen">Standardabweichungen</h4>
<p>Ganz ähnlich verfahren wir für die Standardabweichung, nur dass wir hier als Funktion <code>~sd(.x, na.rm = TRUE)</code> verwenden. Ersetzt auch hier im folgenden Code in der Klammer von <code>c()</code> die Variablennamen mit denen, die euch interessieren, hier sowohl die täglichen als auch Baselinevariablen. Die Baselinevariable “w” zeigt hier keine SD mit dieser Berechnung und muss separat berechnet werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>standardabweichung <span class="ot">&lt;-</span> mehrebenen_stats<span class="sc">$</span>sd <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(a, b, c), <span class="sc">~</span><span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>standardabweichung_w <span class="ot">&lt;-</span> scales_between<span class="sc">$</span>scores <span class="sc">|&gt;</span> <span class="fu">sd</span>()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>standardabweichung <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">tibble</span>(<span class="at">w =</span> standardabweichung_w), standardabweichung)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>standardabweichung</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">w</th>
<th style="text-align: right;">a</th>
<th style="text-align: right;">b</th>
<th style="text-align: right;">c</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.7024852</td>
<td style="text-align: right;">0.6875217</td>
<td style="text-align: right;">0.6956185</td>
<td style="text-align: right;">0.7549543</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="korrelationen" class="level4">
<h4 class="anchored" data-anchor-id="korrelationen">Korrelationen</h4>
<p>Wir wollen eine Korrelationstabelle, in der wir auf einen Blick sowohl die Zwischen-Person-Korrelationen als auch die Inner-Person-Korrelationen sehen. Die <code>statsBy()</code> Funktion, die wir bereits aufgerufen haben, gibt uns beides separat aus, und wir müssen sie über mehrere Schritte zusammenführen und gemösse APA mit Signifikanzsternchen ergänzen. Die Details der Vorgehensweise geht über den Rahmen dieses Arbeitsbuchs hinaus. Wir verwenden die <code>mehrebenen_stats</code> Liste, die wir weiter oben erstellt haben.</p>
<p>(Die folgende Syntax muss nicht angepasst werden.)</p>
<p>%todo% - star_assign in lib verschieben oder aus r-collection nehmen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>cortable_between <span class="ot">&lt;-</span> mehrebenen_stats<span class="sc">$</span>rbg <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">2</span>) <span class="co"># Zwischen Person Kor.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>cortable_within <span class="ot">&lt;-</span> mehrebenen_stats<span class="sc">$</span>rwg <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">2</span>) <span class="co"># Inner Person Kor.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Signifikanzsternchen</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>star_assign <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.na</span>(x)) {</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(x <span class="sc">&lt;</span> <span class="fl">0.001</span>) <span class="st">"***"</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="fl">0.01</span>) <span class="st">"**"</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="fl">0.05</span>) <span class="st">"*"</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="st">""</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="st">""</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>vstar_assign <span class="ot">&lt;-</span> <span class="fu">Vectorize</span>(star_assign)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(cortable_between)) {</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  cortable_between[i] <span class="ot">&lt;-</span> <span class="fu">str_c</span>(cortable_between[i], <span class="fu">vstar_assign</span>(mehrebenen_stats<span class="sc">$</span>pbg[i]))</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(cortable_within)) {</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  cortable_within[i] <span class="ot">&lt;-</span> <span class="fu">str_c</span>(cortable_within[i], <span class="fu">vstar_assign</span>(mehrebenen_stats<span class="sc">$</span>pwg[i]))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>cortable <span class="ot">&lt;-</span> cortable_between</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>cortable[<span class="fu">lower.tri</span>(cortable)] <span class="ot">&lt;-</span> cortable_within[<span class="fu">lower.tri</span>(cortable_within)] <span class="co"># Inner-Person Korrelationen im unteren Dreieck einfügen.</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>cortable <span class="ot">&lt;-</span> cortable <span class="sc">|&gt;</span>   <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">"var"</span>) <span class="co"># als data frame formatieren (später wichtig)</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>cortable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">var</th>
<th style="text-align: left;">w.bg</th>
<th style="text-align: left;">a.bg</th>
<th style="text-align: left;">b.bg</th>
<th style="text-align: left;">c.bg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">w.bg</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.08</td>
<td style="text-align: left;">0.03</td>
<td style="text-align: left;">0.25*</td>
</tr>
<tr class="even">
<td style="text-align: left;">a.bg</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.32**</td>
<td style="text-align: left;">0.39***</td>
</tr>
<tr class="odd">
<td style="text-align: left;">b.bg</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0.22***</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.29**</td>
</tr>
<tr class="even">
<td style="text-align: left;">c.bg</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0.25***</td>
<td style="text-align: left;">0.29***</td>
<td style="text-align: left;">1***</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Wir erhalten im unteren Dreieck die Inner-Person-Korrelationen, und im oberen Dreieck die Zwischen-Person-Korrelationen.</p>
</section>
<section id="integration-in-tabelle" class="level4">
<h4 class="anchored" data-anchor-id="integration-in-tabelle">Integration in Tabelle</h4>
<p>Jetzt gilt es, die Mittelwerte, Standardabweichungen, ICCs, und Korrelationen in einer Tabelle zu integrieren. Mit der <code>tibble()</code> Funktion bauen wir einen neue Datensatz-Tabelle, in der wir alle Variablen integrieren.</p>
<p>(Die folgende Syntax muss nicht angepasst werden.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>cortable_integriert <span class="ot">&lt;-</span> <span class="fu">tibble</span>(cortable[<span class="st">"var"</span>],</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">m =</span> <span class="fu">t</span>(mittelwerte), <span class="co"># t() transponiert die Dimensionen der Variable, damit wir es als spalte (3x1) haben statt als zeile (1x3)</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">sd =</span> <span class="fu">t</span>(standardabweichung),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">icc =</span> icc[<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(icc)], <span class="co"># 1 überspringen da wir den ICC von "id" nicht brauchen</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                              cortable[,<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(cortable)])</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>cortable_integriert</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">var</th>
<th style="text-align: right;">m</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">icc</th>
<th style="text-align: left;">w.bg</th>
<th style="text-align: left;">a.bg</th>
<th style="text-align: left;">b.bg</th>
<th style="text-align: left;">c.bg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">w.bg</td>
<td style="text-align: right;">-0.019149122</td>
<td style="text-align: right;">0.7024852</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.08</td>
<td style="text-align: left;">0.03</td>
<td style="text-align: left;">0.25*</td>
</tr>
<tr class="even">
<td style="text-align: left;">a.bg</td>
<td style="text-align: right;">0.034273488</td>
<td style="text-align: right;">0.6875217</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.32**</td>
<td style="text-align: left;">0.39***</td>
</tr>
<tr class="odd">
<td style="text-align: left;">b.bg</td>
<td style="text-align: right;">-0.050680775</td>
<td style="text-align: right;">0.6956185</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0.22***</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.29**</td>
</tr>
<tr class="even">
<td style="text-align: left;">c.bg</td>
<td style="text-align: right;">-0.009348921</td>
<td style="text-align: right;">0.7549543</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0.25***</td>
<td style="text-align: left;">0.29***</td>
<td style="text-align: left;">1***</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Die vorhergehenden Analysen zeigen wie man die einzelnen Komponenten der Tabelle erstellt und zusammenführt. Die Funktion cortable_multilevel() aus franzpak führt die einzelnen Funktionen direkt zusammen. Aufgrund der Inklusion von reinen Level-2 Variablen, die keine Varianz auf Level 1 haben, werden uns auch hier ein paar Warnungen ausgegeben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github()</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(franzpak)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>cortable_integriert2 <span class="ot">&lt;-</span> <span class="fu">cortable_multilevel</span>(df_scores, <span class="at">varnames =</span> <span class="fu">c</span>(<span class="st">"w"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="at">grp =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cor(diffs, use = use, method = method): the standard deviation is
zero</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cov2cor(xvals$rwg): diag(V) had non-positive or NA entries; the
non-finite result may be dubious</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cor(new.data[, (nvar + 1):ncol(new.data)], diffs, use = "pairwise",
: the standard deviation is zero</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>cortable_integriert2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">M</th>
<th style="text-align: right;">SD</th>
<th style="text-align: right;">ICC</th>
<th style="text-align: left;">1.</th>
<th style="text-align: left;">2.</th>
<th style="text-align: left;">3.</th>
<th style="text-align: left;">4.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1.w</td>
<td style="text-align: right;">-0.02</td>
<td style="text-align: right;">0.70</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.08</td>
<td style="text-align: left;">0.03</td>
<td style="text-align: left;">0.25*</td>
</tr>
<tr class="even">
<td style="text-align: left;">2.a</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.32**</td>
<td style="text-align: left;">0.39***</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3.b</td>
<td style="text-align: right;">-0.05</td>
<td style="text-align: right;">1.07</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0.22***</td>
<td style="text-align: left;">1***</td>
<td style="text-align: left;">0.29**</td>
</tr>
<tr class="even">
<td style="text-align: left;">4.c</td>
<td style="text-align: right;">-0.01</td>
<td style="text-align: right;">1.06</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0.25***</td>
<td style="text-align: left;">0.29***</td>
<td style="text-align: left;">1***</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="export-von-tabellen-zu-excel" class="level3">
<h3 class="anchored" data-anchor-id="export-von-tabellen-zu-excel">Export von Tabellen zu Excel</h3>
<p>Wir exportieren die Korrelationstabelle nach Excel mittels <code>write_xlsx()</code>.</p>
<p>(Die folgende Syntax muss nicht angepasst werden.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(cortable_integriert2, <span class="at">path =</span> <span class="st">"korrelationstabelle.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Excel-Tabelle lässt sich dann in Word kopieren und kann aufgehübscht, z.B. mit den richtigen Variablennamen versehen werden etc. Damit haben wir nun die Datenaufbereitung und deskriptive Datenanalyse abgeschlossen (ausgenommen Reliabilitätsanalyse).</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>